Prend ce code :
```c
int ft_key_hook(int keycode, t_data *data)
{
    if (keycode == 65362) // haut
    {
        float moveX = 5 * cos(data->head_player->angle * M_PI / 180);
        float moveY = 5 * sin(data->head_player->angle * M_PI / 180);

        int newX = data->head_player->posx + moveX;
        int newY = data->head_player->posy;

        // VÃ©rifiez d'abord le mouvement en X
        if (!is_collision(data, newX, newY))
            data->head_player->posx = newX;

        newX = data->head_player->posx;  // Mettez Ã  jour la valeur de newX aprÃ¨s le mouvement
        newY = data->head_player->posy + moveY;

        // VÃ©rifiez ensuite le mouvement en Y
        if (!is_collision(data, newX, newY))
            data->head_player->posy = newY;

    }
    else if (keycode == 65364) // bas
    {
        float moveX = -2 * cos(data->head_player->angle * M_PI / 180);
        float moveY = -2 * sin(data->head_player->angle * M_PI / 180);

        int newX = data->head_player->posx + moveX;
        int newY = data->head_player->posy;

        if (!is_collision(data, newX, newY))
            data->head_player->posx = newX;

        newX = data->head_player->posx;
        newY = data->head_player->posy + moveY;

        if (!is_collision(data, newX, newY))
            data->head_player->posy = newY;
    }
    else if (keycode == 65363) // droite
        rotate_player(data, 1);
    else if (keycode == 65361) // gauche
        rotate_player(data, -1);
    return (0);
}
```
Et applique la logique de la gestion des collision dans le code qui suit :
```c
int ft_key_hook(int keycode, t_data *data)
{
    if (keycode == 65362) // haut
    {
        data->head_player->px += data->head_player->pdx;
        data->head_player->py += data->head_player->pdy;
    }
    else if (keycode == 65364) // bas
    {
        data->head_player->px -= data->head_player->pdx;
        data->head_player->py -= data->head_player->pdy;
    }
	else if (keycode == 65363) // droite
    {
        data->head_player->pa += 0.1;
        if (data->head_player->pa > 2 * PI)
            data->head_player->pa -= 2 * PI;
        data->head_player->pdx = cos(data->head_player->pa) * 5;
        data->head_player->pdy = sin(data->head_player->pa) * 5;
    }
	else if (keycode == 65361) // gauche
    {
        data->head_player->pa -= 0.1;
        if (data->head_player->pa < 0)
            data->head_player->pa += 2 * PI;
        data->head_player->pdx = cos(data->head_player->pa) * 5;
        data->head_player->pdy = sin(data->head_player->pa) * 5;
    }
	return (0);
}
```